# Отладка и профилирование
1. [bdb - Фреймворк отладчика](#1)
2. [faulthandler - Дамп обратной трассировки Python](#2)
3. [pdb - Отладчик Python](#3)
4. [timeit - Измерение времени выполнения небольших фрагментов кода](#4)
5. [trace - Отслеживание или отслеживание выполнения операторов Python](#5)
6. [tracemalloc - Отслеживание распределения памяти](#6)


## <div id="1">1. bdb - Фреймворк отладчика</div>
> Модуль предоставляет функции, исключение и классы для отладки (установка точек останова, управление выполнением через отладчик). Позволяет выполнять программу пошагово благодаря breakpoints. Модуль `pdb` может быть более удобным для большинства случаев.
### Использование
- Поэтапное выполнение кода.
### Примеры
Создание отладчика, который выводит информацию о выполнении кода:
```python
class MyDebugger(bdb.Bdb):
    def user_line(self, frame):
        self._print_location(frame)
        return self.trace_dispatch

    def _print_location(self, frame):
        filename = frame.f_code.co_filename
        lineno = frame.f_lineno
        print(f"Executing line {lineno} in {filename}")

# Пример кода для отладки
def example_function():
    a = 1
    b = 2
    c = a + b
    print(c)

# Создаем экземпляр отладчика и запускаем код
debugger = MyDebugger()
debugger.run("example_function()")
```


## <div id="2">2. faulthandler - Дамп обратной трассировки Python</div>
> Модуль предоставляет функции для явного сброса обратных трассировок Python, после тайм-аута или по сигналу пользователя. Предоставляет инструменты для обнаружения и отладки сбоев, таких как сегментация памяти, ошибки деления на ноль и другие.
### Использование
- Используется при отладке приложений, особенно для выявления и исправления проблем с низкоуровневыми сбоями.
### Примеры
Программа будет выводить дополнительную отладочную информацию при возникновении сбоев:
```python
# Включение обработки сбоев
faulthandler.enable()
```


## <div id="3">3. pdb - Отладчик Python</div>
> Модуль предоставляет функции и класс для отладки программ Python. Поддерживает установку точек останова и пошаговое выполнение на уровне строки исходного кода, проверку кадров стека, листинг исходного кода. В режиме отладки можно изменять значения переменных для проверки различных сценариев.
### Использование
- Отладка и анализ кода в процессе выполнения.
### Примеры
Когда программа достигнет `pdb.set_trace()`, будет включен интерактивный режим отладчика, где можно будет использовать различные команды для анализа и изменения состояния программы. Например, можно использовать команды n (next) для выполнения следующей строки кода, c (continue) для продолжения выполнения программы до следующей точки останова или завершения, и так далее:
```python
def some_function():
    x = 10
    y = 20
    pdb.set_trace()  # Программа приостановится здесь
    result = x + y
    print(result)

some_function()
```


## <div id="4">4. timeit - Измерение времени выполнения небольших фрагментов кода</div>
> Модуль предоставляет функции и класс для измерения времени выполнения небольших фрагментов кода.
### Использование
- Оптимизация кода, поиск наилучших реализаций или сравнение различных подходов к решению задачи.
### Примеры
```python
# Пример кода, который нужно измерить
code_to_measure = """
result = 0
for i in range(1000):
    result += i
"""

# Измерение времени выполнения кода
execution_time = timeit.timeit(code_to_measure, number=1000)
```


## <div id="5">5. trace - Отслеживание или отслеживание выполнения операторов Python</div>
> Модуль предоставляет классы для отслеживания выполнения программы, генерации аннотированных списков покрытия операторов, вывода отношений вызывающего-вызываемого обьекта и перечисления функций, выполняемых во время выполнения программы. Влияет на производительность.
### Использование
- Отладка и оптимизация кода.
- Определение покрываемости тестов.
### Примеры
Слежка за выполнением функции и запись результатов в папку:
```python
tracer = trace.Trace(ignoredirs=[sys.prefix, sys.exec_prefix], trace=1, count=0)
tracer.run('some_function()')  # Здесь some_function() - это ваша функция или код

results = tracer.results()
results.write_results(summary=True, coverdir='coverdir')  # Результаты будут записаны в папку coverdir
```


## <div id="6">6. tracemalloc - Отслеживание распределения памяти</div>
> Модуль предоставляет функции и классы для отслеживания блоков памяти, выделенных Python. Отслеживает места размещения обьекта, Вычисляет различия между двумя снимками для обнаружения утечек памяти, Генерирует статистику по выделенным блокам памяти по имени файла и по номеру строки: общий размер, количество, средний размер выделенных блоков памяти.
### Использование
- Профилирование и оптимизация кода, связанного с управлением памятью.
### Примеры
Получение статистики использования памяти в различных точках выполнения программы:
```python
# Включаем отслеживание памяти
tracemalloc.start()

# Ваш код, который вы хотите проанализировать

# Получаем статистику использования памяти
stats = tracemalloc.get_stats()

# Выводим результаты
for stat in stats:
    print(stat)
```
