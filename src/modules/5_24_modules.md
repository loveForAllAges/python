# Время выполнения Python
1. [sys - Параметры и функции, специфичные для системы](#1)
2. [sysconfig - Информация о конфигурации Python](#2)
3. [builtins - Встроенные объекты](#3)
4. [\_\_main__ - Среда кода верхнего уровня](#4)
5. [warnings - Контроль предупреждения](#5)
6. [dataclasses - Классы данных](#6)
7. [contextlib - Утилиты для with контекстов операторов](#7)
8. [abc - Абстрактные базовые классы](#8)
9. [atexit - Обработчики выхода](#9)
10. [traceback - Распечатать или получить обратную трассировку стека](#10)
11. [\_\_future__ - Определения будущих операторов](#11)
12. [gc - Интерфейс сборщика мусора](#12)
13. [inspect - Осмотр живых объектов](#13)
14. [site - Перехватчик конфигурации для конкретного сайта](#14)


## <div id="1">1. sys - Параметры и функции, специфичные для системы</div>
> Модуль предоставляет переменные и функции для взаимодействия с интерпретатором Python.
### Использование
- Вывод предупреждений и сообщений об ошибках, чтобы сделать их видимыми, даже если стандартный ввод был перенаправлен.
- Работа со стандартным потоком ввода, вывода и ошибок.
### Примеры
Получение списка элементов командной строки, переданных скрипту:
```python
sys.argv
```
Список строк, определяющих поиск модулей Python:
```python
sys.path.append('/path/to/module')
import my_module
```
Завершение программы:
```python
sys.exit()
```


## <div id="2">2. sysconfig - Информация о конфигурации Python</div>
> Модуль предоставляет функции для доступа к информации о конфигурации Python, такой как список путей установки и переменные конфигурации, соответствующие текущей платформе.
### Использование
- Полезен для программ, которые должны взаимодействовать с библиотеками, заголовочными файлами Python.
### Примеры
Базовые операции:
```python
# Получить значение конфигурационной переменной
libdir = sysconfig.get_config_var('LIBDIR')
print(f"Library directory: {libdir}")

# Получить пути установки Python
paths = sysconfig.get_paths()
print("Installation paths:")
for key, value in paths.items():
    print(f"{key}: {value}")

# Получить путь к стандартным библиотекам Python
lib_path = sysconfig.get_python_lib()
print(f"Python library path: {lib_path}")

# Получить платформу
platform = sysconfig.get_platform()
print(f"Platform: {platform}")

# Получить все конфигурационные переменные и их значения
config_vars = sysconfig.get_config_vars()
print("Configuration variables:")
for key, value in config_vars.items():
    print(f"{key}: {value}")
```


## <div id="3">3. builtins - Встроенные объекты</div>
> Модуль обеспечивает прямой доступ ко всем встроенным функциям и исключениям Python. Автоматически импортируется в любой скрипт, поэтому содержимое доступно без импорта.


## <div id="4">4. \_\_main__ - Среда кода верхнего уровня</div>
> Модуль предоставляет специальный модуль, который используется для определения точки входа в программу.
### Использование
- Организация кода таким образом, чтобы части файла выполнялись только при его прямом запуске, а не при импорте в другие программы.
### Примеры
Если файл запущен напрямую, то условие будет истинным, и код внутри этого блока выполнится. Если файл импортирован как модуль в другом скрипте, то блок кода внутри условия не выполнится.
```python
if __name__ == "__main__":
    some_function()
```

## <div id="5">5. warnings - Контроль предупреждени</div>
> Модуль предоставляет функции для управления предупреждениями. Предупреждения обычно используются для указания на потенциальные проблемы в коде, но которые не являются критическими ошибками.
### Использование
- Полезен при разработке и обслуживании кода, помогая отслеживать и управлять предупреждениями в программах.
### Примеры
В этом примере генерируем предупреждение об устаревании. Оборачиваем в контекстный менеджер для игнорирования предупреждений типа устаревание. Таким образом предупреждение вызвано не будет:
```python
with warnings.catch_warnings():
    warnings.simplefilter('ignore', DeprecationWarning)
    warnings.warn('test warning', DeprecationWarning)
```


## <div id="6">6. dataclasses - Классы данных</div>
> Модуль предоставляет декоратор и функции для автоматического добавления сгенерированных специальных методов, таких как `__init__()` и `__repr__()`.
### Использование
- Автоматическая генерация стандартных методов класса.
- Повышение читаемости кода.
### Примеры
```python
from dataclasses import dataclass

@dataclass
class InventoryItem:
    name: str
    unit_price: float
    quantity_on_hand: int = 0

    def total_cost(self) -> float:
        return self.unit_price * self.quantity_on_hand
```
Этот код добавит обьект такой `__init__()`:
```python
def __init__(self, name: str, unit_price: float, quantity_on_hand: int = 0):
    self.name = name
    self.unit_price = unit_price
    self.quantity_on_hand = quantity_on_hand
```


## <div id="7">7. contextlib - Утилиты для with контекстов операторов</div>
> Модуль предоставляет классы, функции и декораторы для задач, связанных с контекстным оператором `with`.
### Использование
- Определение кода для получения и освобождения ресурсов внутри генератора.
- Работа с обьектами, которые нужно закрывать после использования.
- Подавление исключений в блоке контекста.
- Перенаправление вывода.
### Примеры
Создание менеджера контекста с использованием генераторов:
```python
from contextlib import contextmanager

@contextmanager
def my_context():
    # Код для инициализации ресурсов
    print("Entering the context")
    yield  # Вызов этого оператора передает управление блоку кода, находящемуся между блоками with
    # Код для освобождения ресурсов
    print("Exiting the context")

# Использование
with my_context():
    print("Inside the context")
```
Класс обертка для обьектов, которые поддерживают метод `close`:
```python
from contextlib import closing

with closing(open('example.txt', 'w')) as f:
    f.write('Hello, contextlib!')
```


## <div id="8">8. abc - Абстрактные базовые классы</div>
> Модуль предоставляет классы, декораторы и функции для опредления абстрактных базовых классов.
### Использование
- Создание кода, который следует определенной струкруре, обеспечивая более строгий контроль над тем, как классы взаимодействуют друг с другом.
### Примеры
В данном примере `Shape` является абстрактным базовым классом с абстрактными методами `area` и `perimetr`. Класс `Circle` является подклассом `Shape` и реализует эти абстрактные методы:
```python
from abc import ABC, abstractmethod


class Shape(ABC):

    @abstractmethod
    def area(self):
        pass

    @abstractmethod
    def perimeter(self):
        pass


class Circle(Shape):

    def __init__(self, radius):
        self.radius = radius

    def area(self):
        return 3.14 * self.radius * self.radius

    def perimeter(self):
        return 2 * 3.14 * self.radius

# Создание объекта
circle = Circle(radius=5)
```


## <div id="9">9. atexit - Обработчики выхода</div>
> Модуль предоставляет функции для регистрации функций, которые должны быть выполнены при завершении программы.
### Использование
- Освобождение ресурсов, закрытие файлов, выполнение других завершающих действий при завершении работы программы.
### Примеры
В данном примере при завершении программы будут выполнены функции:
```python
def exit_handler():
    print("Выход из программы")

def additional_cleanup(name):
    print(f"Дополнительная очистка для {name}")

# Регистрация функций для выполнения при завершении программы
atexit.register(exit_handler)
atexit.register(additional_cleanup, "some_resource")
```
Пример с использванием в качестве декоратора (Работает только с функциями, которые можно вызвать без аргументов):
```python
@atexit.register
def goodbye():
    print('Bye')
```


## <div id="10">10. traceback - Распечатать или получить обратную трассировку стека</div>
> Модуль предоставляет функции и классы для извлечения, форматирования и печати трассировок стека программ. В точности имитирует поведение интерпретатора Python при печати трассировки стека.
### Использование
- Печать трассировки стека под управлением программы.
### Примеры
Печать трассировки стека последнего исключения:
```python
try:
    result = 1 / 0
except Exception:
    traceback.print_exc()
```
В этом примере возвращается строка, содержащая трассировку стека последнего исключения:
```python
try:
    result = 1 / 0
except Exception as e:
    error_traceback = traceback.format_exc()
    print(error_traceback)
```
В этом примере возвращается список обьектов `FrameSummary`, представляющих кадры стека для трассировки стека `tb`:
```python
try:
    example_function()
except Exception as e:
    tb = traceback.extract_tb(e.__traceback__)
    for frame in tb:
        print(frame)
```


## <div id="11">11. \_\_future__ - Определения будущих операторов</div>
> Модуль предоставляет класс и функции для включения функций, которые представлены в более новых версиях языка, но могут быть несовместимы с более старыми версиями.
### Использование
- Написание кода, совместимого с будущими версиями Python.


## <div id="12">12. gc - Интерфейс сборщика мусора</div>
> Модуль предоставляет функции и константы для отключения сборщика мусора (garbage collector), настройки частоты сбора, установки параметров отладки. Возможно отключить сборщик. Задача сборщика мусора - автоматическое освобождение памяти, которая больше не используется программой.
### Использование
- Используется редко.
- Управление сборщиком мусора.
### Примеры
В этом примере создано два обьекта с циклической ссылкой между ними. После запуска сборщика мусора циклическая ссылка разрывается, и обьекты становятся доступными для сборки мусора:
```python
# Создаем циклическую ссылку между объектами
class CircularReference:
    def __init__(self):
        self.circular_ref = None

# Создаем объекты с циклической ссылкой
obj1 = CircularReference()
obj2 = CircularReference()
obj1.circular_ref = obj2
obj2.circular_ref = obj1

# Запускаем сборщик мусора
gc.collect()

# Проверяем, что циклическая ссылка была разорвана
print(obj1.circular_ref)  # Вывод: None
print(obj2.circular_ref)  # Вывод: None
```


## <div id="13">13. inspect - Осмотр живых объектов</div>
> Модуль предоставляет функции для получения информации об обьектах во время выполнения программы.
### Использование
- Анализ кода, доступ к атрибутам обьектов, получение сведений о стеке вызовов и других операций с интроспекцией.
- Полезен при создании инструментов для отладки, тестирования или динамического анализа кода.
### Примеры
Является ли обьект модулем:
```python
inspect.ismodule(inspect)
```
Список пар для членов обьекта:
```python
inspect.getmembers(inspect, inspect.isfunction)
```
Исходный код обьекта:
```python
inspect.getsource(inspect.getmembers)
```


## <div id="14">14. site - Перехватчик конфигурации для конкретного сайта</div>
> Модуль предоставляет функционал для настройки параметров, связанных с поиском модулей и пакетов. Модуль автоматически импортируется во время инициализации.
### Использование
- Используется при запуске интерпретатора Python и выполняет различные задачи, связанные с настройкой окружения выполнения.
### Примеры
Получение информации о путях поиска модулей:
```python
# Получение списка директорий, в которых производится поиск модулей
print(site.getsitepackages())

# Вывод стандартных путей для поиска модулей
print(site.getusersitepackages())

# Печать информации о путях поиска модулей
siteinfo = site.getsitepackages() + site.getusersitepackages()
for path in siteinfo:
    print(f"Path: {path}")
```
