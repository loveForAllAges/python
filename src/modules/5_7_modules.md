# Сохранение данных
1. [pickle - Сериализация объектов Python](#1)
2. [copyreg - Регистрация pickle функций поддержки](#2)
3. [shelve - Сохранение объектов Python](#3)
4. [marshal - Внутренняя сериализация объектов Python](#4)
5. [dbm - Интерфейсы к «базам данных» Unix](#5)
6. [sqlite3 - Интерфейс DB-API 2.0 для баз данных SQLite](#6)


## <div id="1">1. pickle - Сериализация объектов Python</div>
> Модуль предоставляет функции для сериализации и десериализации обьектов. Сериализация - процесс преобразования обьекта в поток байтов, который затем может быть сохранен в файле или передан по сети. Десериализация - обратная операция, при которой поток байтов преобразуется обратно в обьект. Десериализация может быть использована для выполнения вредоностного кода, необходимо быть осторожным при загрузке данных.
### Использование
- Сохранение состояния обьектов (например, сохранение прогресса в играх или хранение данных между запусками программы).
- Передача обьектов по сети.
- Кэширование обьектов.
### Примеры
```python
# Сериализация объекта в файл
data = {'name': 'John', 'age': 30, 'city': 'New York'}
with open('data.pkl', 'wb') as file:
    pickle.dump(data, file)

# Десериализация объекта из файла
with open('data.pkl', 'rb') as file:
    loaded_data = pickle.load(file)

print(loaded_data)
```


## <div id="2">2. copyreg - Регистрация pickle функций поддержки</div>
> Модуль предоставляет функции для регистрации функций, которые предоставляют специальное поведение при копировании обьектов с использованием модуля `copy`.
### Использование
- Сохранение обьекта с особым конструктором или состоянием при копировании.
### Примеры
```python
class MyClass:
    def __init__(self, value):
        self.value = value

# Функция, которая будет вызываться при копировании объекта MyClass
def my_class_constructor(value):
    return MyClass(value)

# Регистрация конструктора для MyClass
copyreg.pickle(MyClass, my_class_constructor)

# Теперь объекты MyClass будут копироваться с использованием my_class_constructor
original_object = MyClass(42)
copied_object = copy.copy(original_object)
```


## <div id="3">3. shelve - Сохранение объектов Python</div>
> Модуль предоставляет простой способ хранения и извлечения обьектов на постоянном хранилище. Предоставляет удобный интерфейс для работы с обьектами, сохраненными на диске и может использоваться для сохранения структурированных данных между выполнениями программы. Использует хранилище в формате dbm (database manager), что позволяет эффективно хранить и извлекать данные.
### Использование
- Автоматически обрабатывает сериализацию и десериализацию обьектов, что делает удобным для сохранения сложных структур данных.
### Примеры
```python
# Открываем файл "mydata.db" (или создаем, если не существует)
with shelve.open("mydata") as shelf:
    # Сохраняем данные
    shelf['key1'] = {'name': 'John', 'age': 25}
    shelf['key2'] = [1, 2, 3]

    # Извлекаем данные
    data1 = shelf['key1']
    data2 = shelf['key2']

    print(data1)
    print(data2)
```


## <div id="4">4. marshal - Внутренняя сериализация объектов Python</div>
> Модуль предоставляет функции, которые могут читать и записывать значения в двоичном формате.
### Использование
- Сохранение состояния обьектов, передача данных между процессами или сохранение обьектов в файлы.
### Примеры
```python
data = {'name': 'John', 'age': 30, 'city': 'New York'}

# Сериализация объекта и сохранение в файл
with open('data.marshal', 'wb') as file:
    marshal.dump(data, file)

# Восстановление объекта из файла
with open('data.marshal', 'rb') as file:
    loaded_data = marshal.load(file)
```


## <div id="5">5. dbm - Интерфейсы к «базам данных» Unix</div>
> Модуль предоставляет интерфейс к простым БД, которые хранят ключ-значение. Позволяет сохранять и извлекать данные по ключу, а также выполнять некоторые базовые операции с БД. Реализация может отличаться от ОС.
### Использование
- Подходит для небольших проектов и простых случаев хранения данных.
### Примеры
```python
# Создание или открытие базы данных
with dbm.open('example.db', 'c') as db:
    # Сохранение данных
    db['key1'] = 'value1'
    db['key2'] = 'value2'

    # Извлечение данных
    print(db['key1'])  # Выведет: b'value1'
```


## <div id="6">6. sqlite3 - Интерфейс DB-API 2.0 для баз данных SQLite</div>
> Модуль является библиотекой Си, который предоставляет облегченную дисковую БД, не требующую отдельного серверного процесса и позволяющую получать доступ к БД с использованием нестандартного варианта языка запросов SQL.
### Использование
- Локальное хранение данных в приложениях, таких как десктопные программы, мобильные приложения и веб-сайты.
- Простые приложения, так как модуль не требует сложной настройки и легко внедряется.
- Использование SQLite для внутреннего хранения данных.
### Примеры
```python
# Создание соединения с базой данных (или ее создание, если она не существует)
conn = sqlite3.connect('example.db')
# Создание объекта-курсора для выполнения SQL-запросов
cursor = conn.cursor()
# Создание таблицы
cursor.execute('''CREATE TABLE IF NOT EXISTS users (id INTEGER PRIMARY KEY, name TEXT, age INTEGER)''')
# Вставка данных
cursor.execute("INSERT INTO users (name, age) VALUES (?, ?)", ('John Doe', 25))
# Выполнение коммита (сохранение изменений)
conn.commit()
# Запрос данных
cursor.execute("SELECT * FROM users")
rows = cursor.fetchall()
# Вывод результатов
for row in rows:
    print(row)
# Закрытие соединения
conn.close()
```